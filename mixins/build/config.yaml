entries:
  - destination: manifests/platform/services/observability/alloy/rules
    mixins:
      - name: k8s-mixin-rules
        entrypoint: mixins/build/k8s-mixin/rules.jsonnet
      - name: k8s-mixin-alerts
        entrypoint: mixins/build/k8s-mixin/alerts.jsonnet

  - destination: manifests/platform/base/secrets/cert-manager/rules
    mixins:
      - name: cert-manager-mixin-rules
        entrypoint: mixins/build/cert-manager-mixin/rules.jsonnet
      - name: cert-manager-mixin-alerts
        entrypoint: mixins/build/cert-manager-mixin/alerts.jsonnet

  - destination: manifests/platform/services/observability/mimir/rules
    mixins:
      - name: mimir-mixin-rules
        entrypoint: mixins/build/mimir-mixin/rules.jsonnet
      - name: mimir-mixin-alerts
        entrypoint: mixins/build/mimir-mixin/alerts.jsonnet

  - destination: manifests/platform/services/data-platform/strimzi-kafka/metrics/rules
    mixins:
      - name: strimzi-kafka-mixin-rules
        source_glob: mixins/vendor/metrics/prometheus-install/prometheus-rules/*.yaml
        patch_dir: mixins/build/strimzi-kafka
        exclude_files:
          - prometheus-kafka-bridge-rules.yaml
          - prometheus-kafka-connect-rules.yaml
          - prometheus-mirrormaker2-rules.yaml

  - destination: manifests/platform/services/data-platform/strimzi-kafka/metrics/configmaps
    mixins:
      - name: kafka-metrics
        entrypoint: mixins/build/strimzi-kafka/kafka-metrics-configmap.jsonnet

  - destination: manifests/platform/services/data-platform/strimzi-kafka/metrics/podmonitors
    mixins:
      - name: strimzi-kafka-podmonitors
        source_glob: mixins/vendor/github.com/strimzi/strimzi-kafka-operator/examples/metrics/prometheus-install/pod-monitors/*.yaml
        patch_dir: mixins/build/strimzi-kafka/podmonitors
        exclude_files:
          - bridge-metrics.yaml
